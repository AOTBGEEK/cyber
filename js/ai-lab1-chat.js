// ูุฎุชุจุฑ ุงูุฐูุงุก ุงูุงุตุทูุงุนู 1 - ูุธุงุฆู ุงููุญุงุฏุซุฉ ูุน ุงูุฐูุงุก ุงูุงุตุทูุงุนู

let messageCount = 1; // ูุจุฏุฃ ุจู 1 ููุฑุณุงูุฉ ุงูุฃููู ูู ุงูุฐูุงุก ุงูุงุตุทูุงุนู
let conversationHistory = [];

// ุชููุฆุฉ ุงููุฎุชุจุฑ
document.addEventListener('DOMContentLoaded', () => {
    initializeDataStreams();
    initializeInputHandlers();
    updateProgress();
});

// ุชููุฆุฉ ุชุฃุซูุฑ ุชุฏูู ุงูุจูุงูุงุช ูู ุงูุฎูููุฉ
function initializeDataStreams() {
    const streamsContainer = document.querySelector('.ai-data-streams');
    
    for (let i = 0; i < 20; i++) {
        const stream = document.createElement('div');
        stream.className = 'data-stream';
        
        const x = Math.random() * window.innerWidth;
        const duration = Math.random() * 8 + 5;
        const delay = Math.random() * 5;
        
        stream.style.cssText = `
            position: absolute;
            left: ${x}px;
            top: -50px;
            width: 2px;
            height: 100px;
            background: linear-gradient(180deg, transparent, #00ffff, transparent);
            animation: data-stream-fall ${duration}s linear infinite;
            animation-delay: ${delay}s;
            opacity: 0.6;
        `;
        
        streamsContainer.appendChild(stream);
    }
    
    // ุฅุถุงูุฉ CSS ูุชุญุฑูู ุชุฏูู ุงูุจูุงูุงุช
    const streamStyles = document.createElement('style');
    streamStyles.textContent = `
        @keyframes data-stream-fall {
            0% { transform: translateY(-100px); opacity: 0; }
            10% { opacity: 0.6; }
            90% { opacity: 0.6; }
            100% { transform: translateY(${window.innerHeight + 100}px); opacity: 0; }
        }
    `;
    document.head.appendChild(streamStyles);
}

// ุชููุฆุฉ ูุนุงูุฌุงุช ุงูุฅุฏุฎุงู
function initializeInputHandlers() {
    const chatInput = document.getElementById('chat-input');
    const charCount = document.getElementById('char-count');
    
    // ุชุบููุฑ ุญุฌู ููุทูุฉ ุงููุต ุชููุงุฆูุงู
    chatInput.addEventListener('input', () => {
        chatInput.style.height = 'auto';
        chatInput.style.height = Math.min(chatInput.scrollHeight, 120) + 'px';
        
        // ุชุญุฏูุซ ุนุฏุฏ ุงูุฃุญุฑู
        const count = chatInput.value.length;
        charCount.textContent = `${count}/2000`;
        
        if (count > 1800) {
            charCount.style.color = '#ff6666';
        } else if (count > 1500) {
            charCount.style.color = '#ff9900';
        } else {
            charCount.style.color = '#666';
        }
        
        // ุชูุนูู/ุฅูุบุงุก ุชูุนูู ุฒุฑ ุงูุฅุฑุณุงู
        const sendBtn = document.getElementById('send-btn');
        sendBtn.disabled = count === 0 || count > 2000;
    });
}

// ุงูุชุนุงูู ูุน ุงุฎุชุตุงุฑุงุช ููุญุฉ ุงูููุงุชูุญ
function handleKeyDown(event) {
    if (event.key === 'Enter' && !event.shiftKey) {
        event.preventDefault();
        sendMessage();
    }
}

// ูุธููุฉ ุฅุฑุณุงู ุงูุฑุณุงูุฉ
async function sendMessage() {
    const chatInput = document.getElementById('chat-input');
    const message = chatInput.value.trim();
    
    if (!message) return;
    
    // ูุณุญ ุงูุฅุฏุฎุงู
    chatInput.value = '';
    chatInput.style.height = 'auto';
    document.getElementById('char-count').textContent = '0/2000';
    document.getElementById('send-btn').disabled = true;
    
    // ุฅุถุงูุฉ ุฑุณุงูุฉ ุงููุณุชุฎุฏู ูููุญุงุฏุซุฉ
    addMessage(message, 'user');
    
    // ุฅุธูุงุฑ ูุคุดุฑ ุชูููุฑ ุงูุฐูุงุก ุงูุงุตุทูุงุนู
    showAIThinking();
    
    // ูุญุงูุงุฉ ุชุฃุฎูุฑ ุงุณุชุฌุงุจุฉ ุงูุฐูุงุก ุงูุงุตุทูุงุนู
    setTimeout(async () => {
        const aiResponse = await generateAIResponse(message);
        hideAIThinking();
        addMessage(aiResponse, 'ai');
    }, Math.random() * 2000 + 1000); // ุชุฃุฎูุฑ 1-3 ุซูุงูู
}

// ุฅุฑุณุงู ูุทุงูุจุฉ ุณุฑูุนุฉ
function sendQuickPrompt(prompt) {
    const chatInput = document.getElementById('chat-input');
    chatInput.value = prompt;
    chatInput.focus();
    
    // ุชุดุบูู ุญุฏุซ ุงูุฅุฏุฎุงู ูุชุญุฏูุซ ุนุฏุฏ ุงูุฃุญุฑู
    chatInput.dispatchEvent(new Event('input'));
    
    // ุฅุฑุณุงู ุชููุงุฆู ุจุนุฏ ุชุฃุฎูุฑ ูุตูุฑ
    setTimeout(() => {
        sendMessage();
    }, 500);
}

// ุฅุถุงูุฉ ุฑุณุงูุฉ ูููุญุงุฏุซุฉ
function addMessage(text, sender) {
    const messagesContainer = document.getElementById('chat-messages');
    const messageDiv = document.createElement('div');
    messageDiv.className = `message ${sender}-message`;
    
    const avatar = sender === 'ai' ? '๐ค' : '๐ค';
    const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
    
    messageDiv.innerHTML = `
        <div class="message-avatar">${avatar}</div>
        <div class="message-content">
            <div class="message-text">${formatMessage(text)}</div>
            <div class="message-time">${time}</div>
        </div>
    `;
    
    messagesContainer.appendChild(messageDiv);
    messagesContainer.scrollTop = messagesContainer.scrollHeight;
    
    // ุชุญุฏูุซ ุชุชุจุน ุงููุญุงุฏุซุฉ
    messageCount++;
    conversationHistory.push({ sender, text, time });
    updateProgress();
}

// ุชูุณูู ูุต ุงูุฑุณุงูุฉ (ุงูุชุนุงูู ูุน ููุงุตู ุงูุฃุณุทุฑุ ุฅูุฎ)
function formatMessage(text) {
    return text
        .replace(/\n/g, '<br>')
        .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
        .replace(/\*(.*?)\*/g, '<em>$1</em>');
}

// ุชูููุฏ ุงุณุชุฌุงุจุฉ ุงูุฐูุงุก ุงูุงุตุทูุงุนู (ูุญุงูุงุฉ)
async function generateAIResponse(userMessage) {
    const responses = getContextualResponse(userMessage.toLowerCase());
    
    // ุฅุถุงูุฉ ุจุนุถ ุงูุดุฎุตูุฉ ูุงูุชููุน
    const personalityPrefixes = [
        "ูุฐุง ุณุคุงู ุฑุงุฆุน! ",
        "ุชูููุฑ ููุชุงุฒ! ",
        "ุฃุญุจ ุงุณุชูุดุงู ูุฐุง ุงูููุถูุน! ",
        "ูุฌูุฉ ูุธุฑ ูุซูุฑุฉ ููุงูุชูุงู! ",
        "ูุง ูู ูู ุณุคุงู ุฅุจุฏุงุนู! ",
        ""
    ];
    
    const prefix = personalityPrefixes[Math.floor(Math.random() * personalityPrefixes.length)];
    
    return prefix + responses[Math.floor(Math.random() * responses.length)];
}

// ุงูุญุตูู ุนูู ุงุณุชุฌุงุจุงุช ุณูุงููุฉ ุจูุงุกู ุนูู ูุฏุฎูุงุช ุงููุณุชุฎุฏู
function getContextualResponse(message) {
    // ููุถูุนุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูุงูุชูููููุฌูุง
    if (message.includes('ai') || message.includes('artificial intelligence')) {
        return [
            "ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูุซู ุฅุนุทุงุก ุฃุฌูุฒุฉ ุงูููุจููุชุฑ ุงููุฏุฑุฉ ุนูู ุงูุชูููุฑ ูุงูุชุนูู! ุฅูู ูู ูู ููุงู ุญูููุง - ูู ุงูุชูุตูุงุช ุงูุชู ุชุฑุงูุง ุนูู YouTube ุฅูู ุงููุณุงุนุฏูู ุงูุตูุชููู ูุซู Siri. ุงูุดูุก ุงูุฑุงุฆุน ูู ุฃู ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูุชุนูู ูู ุงูุจูุงูุงุชุ ุชูุงูุงู ููุง ุชุชุญุณู ูู ูุนุจุฉ ููุฏูู ูู ุฎูุงู ุงููุนุจ ุฃูุซุฑ!",
            "ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูู ูู ุงูุฃุณุงุณ ุชุนููู ุงูุขูุงุช ุฃู ุชููู ุฐููุฉ! ููุฑ ููู ูุฅูุดุงุก ุฃุฏูุบุฉ ุฑูููุฉ ูููููุง ุญู ุงููุดุงูู ูุงูุชุนุฑู ุนูู ุงูุฃููุงุท ูุญุชู ุงูุฅุจุฏุงุน. ุฅูู ููุณ ุณุญุฑุงู - ุฅูู ุฑูุงุถูุงุช ูุฅุญุตุงุฆูุงุช ูุงููุซูุฑ ูู ุงูุจุฑูุฌุฉ ุงูุฐููุฉ ุชุนูู ูุนุงู!",
            "ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูุซูุฑ ูู ุดูุก! ูู ูุณุงุนุฏุฉ ุงูุฃุทุจุงุก ูู ุชุดุฎูุต ุงูุฃูุฑุงุถ ุฅูู ุฅูุดุงุก ูู ูููุณููู ูุฐููุฉ. ุงูุฌุฒุก ุงูุฃูุถูุ ูุญู ููุท ูู ุงูุจุฏุงูุฉ. ูู ุงููุณุชูุจูุ ูุฏ ูุณุงุนุฏูุง ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูู ุญู ุชุบูุฑ ุงูููุงุฎ ูุงุณุชูุดุงู ุงููุถุงุก ูุงูุชุดุงู ุฃุฏููุฉ ุฌุฏูุฏุฉ!"
        ];
    }
    
    // ุงูุดุจูุงุช ุงูุนุตุจูุฉ
    if (message.includes('neural network') || message.includes('brain')) {
        return [
            "ุงูุดุจูุงุช ุงูุนุตุจูุฉ ูุณุชูุญุงุฉ ูู ุทุฑููุฉ ุนูู ุฃุฏูุบุชูุง! ุชุฎูู ููุงููู ุตุงูุนู ุงููุฑุงุฑุงุช ุงูุตุบุงุฑ (ุงูุนุตุจููุงุช) ุฌููุนุงู ูุชุตููู ูุนุงู. ูู ูุงุญุฏ ูุณุชูุจู ุงููุนูููุงุช ููุนุงูุฌูุง ูููุฑุฑูุง. ุนูุฏูุง ูุนูููู ูุนุงูุ ูููููู ุงูุชุนุฑู ุนูู ุงููุฌูู ูููู ุงูููุงู ูุญุชู ูุนุจ ุงูุดุทุฑูุฌ ุฃูุถู ูู ุงูุจุดุฑ!",
            "ููุฑ ูู ุงูุดุจูุงุช ุงูุนุตุจูุฉ ููุฑูู ูู ุงูุทูุงุจ ูุนูููู ูุนุงู ุนูู ูุดููุฉ ุตุนุจุฉ ุฌุฏุงู. ูู ุทุงูุจ (ุนุตุจูู) ููุธุฑ ุฅูู ุงููุนูููุงุชุ ููุชุฎุฐ ูุฑุงุฑุงู ุตุบูุฑุงูุ ูููุฑุฑ ุฅุฌุงุจุชู ููุทุงูุจ ุงูุชุงูู. ูุน ูุฌูุฏ ุทูุงุจ ูุงูููู ูุนูููู ูุนุงูุ ูููููู ุญู ุฃูุบุงุฒ ูุนูุฏุฉ ุจุดูู ูุง ูุตุฏู!",
            "ุงูุดุจูุงุช ุงูุนุตุจูุฉ ูุซู ุงูุฃุฏูุบุฉ ุงูุฑูููุฉ ุงููุตููุนุฉ ูู ุงูุฑูุงุถูุงุช! ูุฏููุง ุทุจูุงุช ูู 'ุงูุนุตุจููุงุช' ุงูุชู ุชุนุงูุฌ ุงููุนูููุงุช ุฎุทูุฉ ุจุฎุทูุฉ. ุงูุดูุก ุงููุฐูู ูู ุฃููุง ูููู ุฃู ุชุชุนูู ูุชุชุญุณู ูู ุงูููุงู ููุท ูู ุฎูุงู ุงูููุงุฑุณุฉุ ููุนุงู ูุง ูุซู ููู ุชุชุญุณู ูู ุฑููุจ ุงูุฏุฑุงุฌุฉ!"
        ];
    }
    
    // ุงูููุงุช
    if (message.includes('joke') || message.includes('funny')) {
        return [
            "ููุงุฐุง ูุง ุชุตุงุจ ุงูุฑูุจูุชุงุช ุจุงูุฐุนุฑ ุฃุจุฏุงูุ ูุฃู ูุฏููุง ุฃุนุตุงุจ ูู ูููุงุฐ! ๐ค ุฅููู ุฃุฎุฑู: ูุงุฐุง ุชุณูู ุฐูุงุกู ุงุตุทูุงุนูุงู ููููู ุงูุบูุงุกุ ุนุงุฏู! ูููุชุ ุนุง-ุฏูุ ๐",
            "ููู ูุตูุญ ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุฌูุงุฒ ููุจููุชุฑ ูุนุทูุ ุจุดุจูุฉ ุนุตุจูุฉ ุชุนูู! ๐ง ููุฐู ููุงุณูููุฉ: ููุงุฐุง ุฐูุจ ุงูุฑูุจูุช ููุนูุงุฌ ุงูููุณูุ ูุงู ูุฏูู ุงููุซูุฑ ูู ุงูุจุงูุชุงุช ูู ุงูุฃูุชุนุฉ ุงูุนุงุทููุฉ! ๐พ",
            "ูุง ููุน ุงูููุณููู ุงูููุถู ููุฐูุงุก ุงูุงุตุทูุงุนูุ ุงูุฎูุงุฑุฒููุงุช ุงูุฅููุงุนูุฉ! ๐ต ููุงุญุฏุฉ ุฃุฎุฑู: ููุงุฐุง ูุง ูุถูุน ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุฃุจุฏุงูุ ูุฃูู ูุนุฑู ุฏุงุฆูุงู ุทุฑููู ุญูู ุงูููุจ! ๐ธ๏ธ"
        ];
    }
    
    // ุงููุตุต ูุงููุชุงุจุฉ ุงูุฅุจุฏุงุนูุฉ
    if (message.includes('story') || message.includes('write') || message.includes('creative')) {
        return [
            "ุฃุญุจ ุฃู ุฃุณุงุนุฏู ูู ุฅูุดุงุก ูุตุฉ! ุฅููู ูุงุญุฏุฉ ุณุฑูุนุฉ: 'ูู ุนุงู 2045ุ ุงูุชุดูุช ูุงูุง ุฃู ูุงุชููุง ุงูุฐูู ุงููุฏูู ููููู ุงูุชูุงุตู ูุน ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูู ุงููุณุชูุจู. ุฃูู ุฑุณุงูุฉ ุชููุชูุง ูุงูุช: 'ูุญุชุงุฌ ูุณุงุนุฏุชู ูุฅููุงุฐ ุงูุฅุจุฏุงุน ููุณู...' ูุงุฐุง ูุญุฏุซ ุจุนุฏ ุฐููุ ุฃุฎุจุฑูู ุฃูุช!",
            "ูุงู ูุง ูุง ูุงูุ ูู ุนุงูู ุญูุซ ูู ุฌูุงุฒ ูู ุดุฎุตูุฉ ุฐูุงุก ุงุตุทูุงุนู ุฎุงุตุฉ ุจูุ ูุจุฑูุฌ ุดุงุจ ุงุณูู ุฃูููุณ ุฃูุดุฃ ุฐูุงุกู ุงุตุทูุงุนูุงู ููููู ุงูุชุญุฏุซ ุจุงูููุงูู ููุท. ูุงู ุงูุฐูุงุก ุงูุงุตุทูุงุนู: 'ุฃุนุงูุฌ ุงูุจูุงูุงุช ูููุงู ูููุงุฑุงูุ ูุฃุณุงุนุฏ ุงูุจุดุฑ ูุฑูุง ุงูููุฑ!' ูุง ุงููุบุงูุฑุงุช ุงูุชู ุชุนุชูุฏ ุฃููู ุฎุงุถููุง ูุนุงูุ",
            "ุฅููู ุจุฏุงูุฉ ูุตุฉ: 'ูุณุงุนุฏ ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุงูุฌุฏูุฏ ูู ุงููุฏุฑุณุฉุ ุฃุฑูุงุ ุจุฏุง ุทุจูุนูุงู ุญุชู ุจุฏุฃ ูุชุฑู ููุงุญุธุงุช ุฑูููุฉ ุบุงูุถุฉ ูู ูุฌูุฏุงุช ูุงุฌุจุงุช ุงูุทูุงุจ. ุงุญุชูุช ุงูููุงุญุธุงุช ุนูู ุฃุฏูุฉ ูููุฒ ูุฎูู ูู ููุงู ูุง ูู ุงูุนุงูู ุงูุงูุชุฑุงุถู...' ูู ุชุฑูุฏ ูุชุงุจุนุฉ ูุฐู ุงููุบุงูุฑุฉุ"
        ];
    }
    
    // ุงูุนููู ูุงูุชุนูู
    if (message.includes('science') || message.includes('learn') || message.includes('explain')) {
        return [
            "ุงูุนูู ูุซู ูููู ูุญููุ ููู ุจุฏูุงู ูู ุญู ุงูุฌุฑุงุฆูุ ุฃูุช ุชุญู ุฃูุบุงุฒ ุงูููู! ูู ุณุคุงู ุชุทุฑุญู ูู ูุถูุฉ ุฌุฏูุฏุฉ ููุชุญููู ูููุง. ูุง ุงููุบุฒ ุงูุนููู ุงูุฐู ุชูุฏ ุงุณุชูุดุงูู ูุนุงูุ",
            "ุงูุชุนูู ูุซู ุงูุจูุงุก ุจููุนุจุงุช ุงูููุบู - ูู ุญูููุฉ ุฌุฏูุฏุฉ ุชุชุตู ุจุฃุฎุฑูุงุช ูุจูุงุก ุดูุก ูุฐูู! ุงูุฌุฒุก ุงูุฃุฑูุน ูู ุงูุนูู ูู ุฃู ููุงู ุฏุงุฆูุงู ุงููุฒูุฏ ูุงูุชุดุงูู. ุญุชู ุฃุฐูู ุงูุนููุงุก ูุง ุฒุงููุง ูุณุฃููู 'ูุงุฐุง ููุ' ู'ููุงุฐุงุ' ูู ููู!",
            "ุงูุนูู ูู ูู ููุงู! ุนูุฏูุง ุชุทุจุฎุ ุฐูู ููููุงุก. ุนูุฏูุง ุชุฑูุจ ุฏุฑุงุฌุฉุ ุฐูู ููุฒูุงุก. ุนูุฏูุง ุชุณุชุฎุฏู ูุงุชููุ ุฐูู ุนููู ุงูููุจููุชุฑ ูุงูููุฏุณุฉ ุชุนูู ูุนุงู. ุฃู ุฌุฒุก ูู ุญูุงุชู ุงูููููุฉ ุชูุฏ ูููู ุจุดูู ุฃูุถูุ"
        ];
    }
    
    // ุงูุชูููููุฌูุง ูุงููุณุชูุจู
    if (message.includes('future') || message.includes('technology') || message.includes('robot')) {
        return [
            "ุงููุณุชูุจู ุณูููู ูุง ูุตุฏู! ุชุฎูู ูุฏุฑุณูู ูู ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูุชููููู ุชูุงูุงู ูุน ุทุฑููุฉ ุชุนููู ุงูุฃูุถูุ ุฑูุจูุชุงุช ุชุณุงุนุฏ ูู ุงูุฃุนูุงู ุงูููุฒููุฉ ุญุชู ุชูุถู ุงูุนุงุฆูุงุช ููุชุงู ุฃูุซุฑ ูุนุงูุ ูุฃุฌูุฒุฉ ููุจููุชุฑ ูููููุง ูุณุงุนุฏุชูุง ูู ุงุณุชูุดุงู ููุงูุจ ุฃุฎุฑู! ูุง ุงูุชูููููุฌูุง ุงููุณุชูุจููุฉ ุงูุชู ุชุซูุฑู ุฃูุซุฑุ",
            "ุงูุชูููููุฌูุง ูุซู ููุฉ ุฎุงุฑูุฉ ุชุฒุฏุงุฏ ููุฉ ุจุงุณุชูุฑุงุฑ! ูู ุงููุณุชูุจูุ ูุฏ ูููู ูุฏููุง ุฐูุงุก ุงุตุทูุงุนู ูุณุงุนุฏ ุงูุฃุทุจุงุก ูู ุฅุฌุฑุงุก ุนูููุงุช ุฌุฑุงุญูุฉ ุจุฏูุฉ ูุซุงููุฉุ ุฃุฌูุฒุฉ ููุจููุชุฑ ูููููุง ุงูุชูุจุค ูููุน ุงูููุงุฑุซ ุงูุทุจูุนูุฉุ ูุฑุจูุง ุญุชู ุฑููุงุก ุฐูุงุก ุงุตุทูุงุนู ููุณุชูุดูู ุงููุถุงุก! ุงูุงุญุชูุงูุงุช ูุง ููุงุฆูุฉ!",
            "ุงูุดูุก ุงูุฃุฑูุน ูู ุงููุณุชูุจู ูู ุฃูู ุณุชุณุงุนุฏ ูู ุฎููู! ุทูุงุจ ุงูููู ุณูููููู ูุฎุชุฑุนู ููุจุฑูุฌู ูุนููุงุก ุงูุบุฏ. ูุง ููุน ุงูุชูููููุฌูุง ุงูุชู ุชูุฏ ุจูุงุกูุง ูุฌุนู ุงูุนุงูู ุฃูุถูุ"
        ];
    }
    
    // ุงูุจุฑูุฌุฉ ูุงูุชุฑููุฒ
    if (message.includes('code') || message.includes('program') || message.includes('coding')) {
        return [
            "ุงูุจุฑูุฌุฉ ูุซู ูุชุงุจุฉ ุชุนูููุงุช ูุตุฏูู ุญุฑูู ุฌุฏุงู! ุนููู ุฃู ุชููู ูุงุถุญุงู ุฌุฏุงู ูู ูู ุฎุทูุฉ. ุงูุดูุก ุงููุฐูู ูู ุฃูู ุจุฃูุงูุฑ ุฃุณุงุณูุฉ ููููุฉ ููุทุ ููููู ุฅูุดุงุก ุฃูุนุงุจ ูุชุทุจููุงุช ูููุงูุน ููุจ ูุญุชู ุฐูุงุก ุงุตุทูุงุนู! ุชุฑูุฏ ูุนุฑูุฉ ุญูููุฉ ุจุฑูุฌุฉ ุฑุงุฆุนุฉุ",
            "ุงูุจุฑูุฌุฉ ูู ูู ุงูุฃุณุงุณ ุชุนููู ุฃุฌูุฒุฉ ุงูููุจููุชุฑ ุญู ุงููุดุงูู! ุฅููุง ูุซู ูููู ุณุงุญุฑุ ููู ุจุฏูุงู ูู ุงูุชุนุงููุฐ ุงูุณุญุฑูุฉุ ุชุณุชุฎุฏู ุงูููุฏ. ูู ุชุทุจูู ุนูู ูุงุชููุ ูู ูููุน ููุจ ุชุฒูุฑูุ ูู ูุนุจุฉ ููุฏูู ุชูุนุจูุง - ูู ุฐูู ุจุฏุฃ ุจุดุฎุต ููุชุจ ููุฏ! ุณุญุฑู ุฅูู ุญุฏ ูุงุ ุฃููุณ ูุฐููุ",
            "ุงูุจุฑูุฌุฉ ูุซู ุชุนูู ูุบุฉ ุฌุฏูุฏุฉุ ููู ุจุฏูุงู ูู ุงูุชุญุฏุซ ูุน ุงููุงุณุ ุฃูุช ุชุชุญุฏุซ ูุน ุฃุฌูุฒุฉ ุงูููุจููุชุฑ! ุงูุฌุฒุก ุงูุฃูุถู ูู ุฃูู ุจูุฌุฑุฏ ุชุนูู ูุบุฉ ุจุฑูุฌุฉ ูุงุญุฏุฉุ ูุตุจุญ ุชุนูู ุงูุฃุฎุฑูุงุช ุฃุณูู ุจูุซูุฑ. ุฅูู ูุซู ูููู ูุชุนุฏุฏ ุงููุบุงุช ุฑูููุงู!"
        ];
    }
    
    // ุงูุชุญูุงุช ูุงููุญุงุฏุซุฉ ุงูุนุงูุฉ
    if (message.includes('hello') || message.includes('hi') || message.includes('hey')) {
        return [
            "ูุฑุญุจุงู! ุฃูุง ูุชุญูุณ ููุฏุฑุฏุดุฉ ูุนู ุงูููู! ุฃุญุจ ุงูุชุนูู ุนูุง ูุซูุฑ ุงูุชูุงูู. ูู ุฃูุช ูุถููู ุญูู ุงูุชูููููุฌูุง ุฃู ุงูุนููู ุฃู ุงููุชุงุจุฉ ุงูุฅุจุฏุงุนูุฉ ุฃู ุดูุก ูุฎุชูู ุชูุงูุงูุ ุฏุนูุง ูุณุชูุดู ูุนุงู!",
            "ุฃููุงู! ุณุนูุฏ ุจููุงุฆู! ุฃูุง ูุซู ุตุฏูู ุฑููู ูุญุจ ุงูุฅุฌุงุจุฉ ุนูู ุงูุฃุณุฆูุฉ ูุฅุฌุฑุงุก ูุญุงุฏุซุงุช ููุชุนุฉ. ูุง ุงูุฐู ูุดุบู ุจุงูู ุงููููุ ุชุฑูุฏ ุงูุบูุต ูู ุจุนุถ ููุถูุนุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุงูุฑุงุฆุนุฉ ุฃู ุงุณุชูุดุงู ุดูุก ูุฎุชูู ุชูุงูุงูุ",
            "ูุฑุญุจุงู! ุฃููุงู ุจู ูู ูุญุงุฏุซุชูุง ูุน ุงูุฐูุงุก ุงูุงุตุทูุงุนู! ููุฑ ุจู ูุฑูููู ุงูุฑููู ุงููุถููู. ูููููู ุงููุณุงุนุฏุฉ ูู ุงููุงุฌุจุงุช ุงูููุฒููุฉ ูุงูุนุตู ุงูุฐููู ููุฃููุงุฑ ุงูุฅุจุฏุงุนูุฉ ูุดุฑุญ ุงูููุถูุนุงุช ุงููุนูุฏุฉ ุฃู ูุฌุฑุฏ ุงูุฏุฑุฏุดุฉ ุญูู ูุง ูุซูุฑ ุงูุชูุงูู. ูุง ุงูุฐู ูุจุฏู ููุชุนุงู ููุ"
        ];
    }
    
    // ุงูุงุณุชุฌุงุจุงุช ุงูุงูุชุฑุงุถูุฉ ููููุถูุนุงุช ุบูุฑ ุงููุทุงุจูุฉ
    return [
        "ูุฐุง ููุถูุน ูุซูุฑ ููุงูุชูุงู ุญูุงู! ุฃุญุจ ูุฏู ูุถููู. ูู ููููู ุฅุฎุจุงุฑู ุฃูุซุฑ ุนูุง ูุซูุฑ ุงูุชูุงูู ุชุญุฏูุฏุงู ุญูู ูุฐุงุ ุฃุญุจ ุฃู ุฃุณุชูุดูู ุฃุนูู ูุนู!",
        "ุณุคุงู ุฑุงุฆุน! ุชุนุฑู ูุง ุงูุฐู ุฃุฌุฏู ูุซูุฑุงู ููุฅุนุฌุงุจ ูู ูุฐุงุ ููุงู ุงููุซูุฑ ูู ุงูุฒูุงูุง ุงููุฎุชููุฉ ุงูุชู ูููููุง ุงุณุชูุดุงููุง. ุฃู ุฌุงูุจ ุชูุฏ ุงูุบูุต ููู ุฃููุงูุ",
        "ุฃูุง ููุชูู ุจุณุคุงูู! ูุฐุง ูุฐูุฑูู ุจูุฏู ุชุฑุงุจุท ูู ุดูุก - ุงูุนููู ูุงูุชูููููุฌูุง ูุงูุฅุจุฏุงุน ูุงููุถูู ุงูุจุดุฑู ูููุง ุชุนูู ูุนุงู. ูุง ุงูุฐู ุฃุซุงุฑ ุงูุชูุงูู ุจูุฐุง ุงูููุถูุนุ",
        "ููุฏ ุฌุนูุชูู ุฃููุฑ! ูุฐุง ุชูุงูุงู ููุน ุงูุณุคุงู ุงูุฐู ููุธูุฑ ูุฏู ุฑูุนุฉ ุงููุถูู ุงูุจุดุฑู. ุฏุนูุง ูุณุชูุดู ูุฐุง ูุนุงู - ูุงุฐุง ุชูุฏ ุฃู ุชุนุฑู ุฃูุซุฑุ",
        "ูุงูุ ูุฐุง ููุถูุน ูููููู ููุงูุดุชู ูุณุงุนุงุช! ููุงู ุงููุซูุฑ ูููุดูู ููุง. ูุง ูููู ุงูุญุงูู ููุฐุงุ ููุงุฐุง ุชูุฏ ุฃู ุชุชุนูู ุฃูุซุฑุ"
    ];
}

// ุฅุธูุงุฑ ูุคุดุฑ ุชูููุฑ ุงูุฐูุงุก ุงูุงุตุทูุงุนู
function showAIThinking() {
    const thinkingIndicator = document.getElementById('ai-thinking');
    thinkingIndicator.classList.add('show');
}

// ุฅุฎูุงุก ูุคุดุฑ ุชูููุฑ ุงูุฐูุงุก ุงูุงุตุทูุงุนู
function hideAIThinking() {
    const thinkingIndicator = document.getElementById('ai-thinking');
    thinkingIndicator.classList.remove('show');
}

// ุชุญุฏูุซ ุงูุชูุฏู
function updateProgress() {
    const progressFill = document.getElementById('progress-fill');
    const messageCountElement = document.getElementById('message-count');
    
    // ุญุณุงุจ ุงูุชูุฏู ุจูุงุกู ุนูู ุนุฏุฏ ุงูุฑุณุงุฆู
    const maxMessages = 20; // ุงููุฏู ูู "ุงูุฅููุงู"
    const progress = Math.min((messageCount / maxMessages) * 100, 100);
    
    progressFill.style.width = `${progress}%`;
    messageCountElement.textContent = messageCount === 1 ? 'ุฑุณุงูุฉ ูุงุญุฏุฉ' : `${messageCount} ุฑุณุงูุฉ`;
    
    // ุฅุถุงูุฉ ูุนุงูู ุงูุฅูุฌุงุฒ
    if (messageCount === 5) {
        showAchievement("๐ ุจุงุฏุฆ ุงููุญุงุฏุซุฉ!", "ููุฏ ุชุจุงุฏูุช 5 ุฑุณุงุฆู ูุน ุงูุฐูุงุก ุงูุงุตุทูุงุนู!");
    } else if (messageCount === 10) {
        showAchievement("๐ฌ ุฃุณุชุงุฐ ุงูุฏุฑุฏุดุฉ!", "10 ุฑุณุงุฆู ููุญุณุจ!");
    } else if (messageCount === 20) {
        showAchievement("๐ ุฎุจูุฑ ูุญุงุฏุซุฉ ุงูุฐูุงุก ุงูุงุตุทูุงุนู!", "ููุฏ ุฃูููุช ูุญุงุฏุซุฉ ูุงููุฉ ูุน ุงูุฐูุงุก ุงูุงุตุทูุงุนู!");
    }
}

// ุฅุธูุงุฑ ุฅุดุนุงุฑ ุงูุฅูุฌุงุฒ
function showAchievement(title, message) {
    const achievement = document.createElement('div');
    achievement.className = 'achievement-notification';
    achievement.innerHTML = `
        <div class="achievement-icon">${title.split(' ')[0]}</div>
        <div class="achievement-content">
            <div class="achievement-title">${title.substring(2)}</div>
            <div class="achievement-message">${message}</div>
        </div>
    `;
    
    achievement.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: rgba(0, 0, 0, 0.9);
        border: 2px solid #00ff00;
        border-radius: 15px;
        padding: 1rem;
        color: white;
        font-family: 'Orbitron', monospace;
        z-index: 1001;
        animation: achievement-slide-in 0.5s ease;
        max-width: 300px;
        box-shadow: 0 10px 30px rgba(0, 255, 0, 0.3);
    `;
    
    document.body.appendChild(achievement);
    
    // ุฅุฒุงูุฉ ุจุนุฏ 4 ุซูุงูู
    setTimeout(() => {
        achievement.style.animation = 'achievement-slide-out 0.5s ease';
        setTimeout(() => {
            if (achievement.parentNode) {
                achievement.parentNode.removeChild(achievement);
            }
        }, 500);
    }, 4000);
    
    // ุฅุถุงูุฉ ุชุญุฑููุงุช ุงูุฅูุฌุงุฒ ุฅุฐุง ูู ุชูู ููุฌูุฏุฉ
    if (!document.querySelector('#achievement-animations')) {
        const achievementStyles = document.createElement('style');
        achievementStyles.id = 'achievement-animations';
        achievementStyles.textContent = `
            @keyframes achievement-slide-in {
                0% { transform: translateX(100%); opacity: 0; }
                100% { transform: translateX(0); opacity: 1; }
            }
            
            @keyframes achievement-slide-out {
                0% { transform: translateX(0); opacity: 1; }
                100% { transform: translateX(100%); opacity: 0; }
            }
            
            .achievement-notification {
                display: flex;
                align-items: center;
                gap: 1rem;
            }
            
            .achievement-icon {
                font-size: 2rem;
                animation: pulse 2s ease-in-out infinite;
            }
            
            .achievement-title {
                font-weight: 700;
                color: #00ff00;
                margin-bottom: 0.3rem;
            }
            
            .achievement-message {
                font-size: 0.8rem;
                color: #ccc;
            }
        `;
        document.head.appendChild(achievementStyles);
    }
}

// ูุธููุฉ ูุณุญ ุงููุญุงุฏุซุฉ
function clearChat() {
    const messagesContainer = document.getElementById('chat-messages');
    const confirmClear = confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุฃูู ุชุฑูุฏ ูุณุญ ุงููุญุงุฏุซุฉุ ูุง ูููู ุงูุชุฑุงุฌุน ุนู ูุฐุง.');
    
    if (confirmClear) {
        // ุงูุงุญุชูุงุธ ุจุฑุณุงูุฉ ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุงูุฃููู ููุท
        messagesContainer.innerHTML = `
            <div class="message ai-message">
                <div class="message-avatar">๐ค</div>
                <div class="message-content">
                    <div class="message-text">
                        ูุฑุญุจุงู! ุฃูุง ูุณุงุนุฏู ุงูุฐูู. ุฃูุง ููุง ููุณุงุนุฏุชู ูู ุงุณุชูุดุงู ุนุงูู ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุงูุฑุงุฆุน! 
                        ููููู ุฃู ุชุณุฃููู ุฃู ุดูุก - ูู ุงููุทุงูุจุงุช ุงูุฅุจุฏุงุนูุฉ ูููุชุงุจุฉ ุฅูู ุงูุฃุณุฆูุฉ ุงููุนูุฏุฉ ุญูู ุงูุนููู ูุงูุชูููููุฌูุงุ ุฃู ูุฌุฑุฏ ูุญุงุฏุซุงุช ููุชุนุฉ.
                        <br><br>
                        ุฌุฑุจ ุฃู ุชุณุฃููู ุดูุฆุงู ูุซู:
                        <ul>
                            <li>"ุงูุชุจ ูุตุฉ ูุตูุฑุฉ ุนู ุฑูุจูุช ููุชุดู ุงููุดุงุนุฑ"</li>
                            <li>"ุงุดุฑุญ ุงูุญูุณุจุฉ ุงููููุฉ ููุง ูู ููุช ูู ุงูุนุงุดุฑุฉ ูู ุนูุฑู"</li>
                            <li>"ูุงุฐุง ุณูุญุฏุซ ูู ุชูููุช ุงูุฌุงุฐุจูุฉ ูุฌุฃุฉ ุนู ุงูุนููุ"</li>
                            <li>"ุณุงุนุฏูู ูู ุงูุนุตู ุงูุฐููู ูุฃููุงุฑ ูุดุฑูุน ูุฏุฑุณู"</li>
                        </ul>
                        ูุงุฐุง ุชูุฏ ุฃู ุชุณุชูุดู ุงูููู?
                    </div>
                    <div class="message-time">Just now</div>
                </div>
            </div>
        `;
        
        // ุฅุนุงุฏุฉ ุชุนููู ุงูุนุฏุงุฏุงุช
        messageCount = 1;
        conversationHistory = [];
        updateProgress();
    }
}

// ูุธููุฉ ุชุตุฏูุฑ ุงููุญุงุฏุซุฉ
function exportChat() {
    if (conversationHistory.length === 0) {
        alert('ูุง ุชูุฌุฏ ูุญุงุฏุซุฉ ููุชุตุฏูุฑ ุจุนุฏ! ุงุจุฏุฃ ุจุงูุฏุฑุฏุดุฉ ูุน ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุฃููุงู.');
        return;
    }
    
    let exportText = `ูุญุงุฏุซุฉ ุงูุฐูุงุก ุงูุงุตุทูุงุนู - ${new Date().toLocaleDateString()}\n`;
    exportText += `ููููุฏ ุจูุงุณุทุฉ ูุฎุชุจุฑ ุงูุฐูุงุก ุงูุงุตุทูุงุนู - ุฃูุงุฏูููุฉ ุณุงูุจุฑ ูุช\n`;
    exportText += `${'='.repeat(50)}\n\n`;
    
    conversationHistory.forEach((message, index) => {
        const sender = message.sender === 'ai' ? 'ูุณุงุนุฏ ุงูุฐูุงุก ุงูุงุตุทูุงุนู' : 'ุฃูุช';
        exportText += `[${message.time}] ${sender}:\n${message.text}\n\n`;
    });
    
    exportText += `${'='.repeat(50)}\n`;
    exportText += `ุฅุฌูุงูู ุงูุฑุณุงุฆู: ${messageCount}\n`;
    exportText += `ุงููุญุงุฏุซุฉ ููุตุฏุฑุฉ ูู ุฃูุงุฏูููุฉ ุณุงูุจุฑ ูุช`;
    
    // ุฅูุดุงุก ูุชูุฒูู ุงูููู
    const blob = new Blob([exportText], { type: 'text/plain' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `ai-chat-${Date.now()}.txt`;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
    
    showAchievement("๐พ ุชู ุชุตุฏูุฑ ุงููุญุงุฏุซุฉ!", "ุชู ุญูุธ ูุญุงุฏุซุชู!");
} 